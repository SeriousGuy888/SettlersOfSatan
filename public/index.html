<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Settlers of Satan</title>
        <link rel="stylesheet" href="/styles/main.css">
        <link rel="stylesheet" href="/styles/layouts.css">
        <meta charset="UTF-8">
        <meta name="description" content="Online Settles of Satan">
        <meta name="keywords" content="catan,settlers of catan,board game,online,online catan,satan,settlers of satan">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
        <script>
            const socket = io()
        </script>
        <script src="login.js" defer></script>
        <script src="join_lobby.js" defer></script>
        <script src="in_lobby.js" defer></script>

        <title>Settlers of Satan</title>
    </head>
    <body>

        <script>
            window.onload = function (){ 
                for (let button of document.getElementsByClassName("colour-button")){
                    button.addEventListener("click", () => {
                        colourChoose(button)
                    })
                }
            }
                
            function colourChoose(button){
                for (let loopButton of document.getElementsByClassName("colour-button")) loopButton.style.border = "2px solid rgb(0, 0, 0)"
                button.style.border = "4px solid rgb(100, 183, 255)"

                fetch("/create_lobby", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            "colour": button.id
                        })
                    })
            }
        </script>

        <main>
            <h1 id="home-title">Settlers of Satan</h1>



            <p id="playing-as" style="display: none;">
                You are playing as 
                <span id="logged-in-nickname"></span>
                <a href="" id="logout-button">(edit)</a>
            </p>

            <section id="logged-out">
                <h2>Please choose a name to start playing!</h2>
                <div class="single-line-input">
                    <input name="nickname" id="nickname-input" placeholder="Mustacho">
                    <button id="login-button">✔</button>
                </div>
            </section>
            <section id="logged-in" style="display: none;">
                <div class="row-layout" id="begin-lobby-panel">
                    <div class="column-layout" id="create-lobby-panel">
                        <h2>Create a Lobby</h2>
                        <p>Choose a name for your lobby.</p>
                        <div class="single-line-input">
                            <input id="create-lobby-name-input" placeholder="Epic Gamer Momebt">
                            <button id="create-lobby-button">Create</button>
                        </div>
                    </div>
                    <div class="column-layout" id="join-lobby-panel">
                        <h2>Join a Lobby</h2>
                        <p>Enter a lobby code.</p>
                        <div class="single-line-input">
                            <input id="join-lobby-code-input" placeholder="ARSON">
                            <button id="join-lobby-button">Join</button>
                        </div>
                    </div>
                </div>
                <div class="row-layout">
                    <div class="column-layout">
                        <h2>Open Lobbies</h2>
                        <button id="open-lobbies-refresh">Refresh</button>
                        <div id="open-lobbies" class="flex-layout-3col-grid"></div>
                    </div>
                </div>
            </section>
            <section id="in-lobby" style="display: none;">
                <h2 id="lobby-name"></h2>

                <button id="leave-lobby"><img alt="←" src="https://static.thenounproject.com/png/565717-200.png"> Leave Lobby</button>

                <p id="choose-colour">Choose colour</p>
                <div class="button-group">
                    <button type="button" class="colour-button" id="red" style="background-color: red; color:black" >Red</input>
                    <button type="button" class="colour-button" id="white" style="background-color: white; color:black">White</button>
                    <button type="button" class="colour-button" id="blue" style="background-color: blue;">Blue</button>
                    <button type="button" class="colour-button" id="orange" style="background-color: orange; color:black">Orange</button>
                    <button type="button" class="colour-button" id="green" style="background-color: green;">Green</button>
                    <button type="button" class="colour-button" id="purple" style="background-color: purple;">Purple</button>
                </div>

                <div class="row-layout">
                    <div class="column-layout">
                        <h2>Players <span id="player-count">0</span>/6</h2>
                        <div id="lobby-player-list"></div>
                    </div>
                    <div class="column-layout">
                        <h2>Chat</h2>
                        <div id="lobby-chat"></div>
                    </div>
                </div>

                <button id="chat-button"></button>
            </section>
        </main>
    </body>
</html>