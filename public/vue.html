<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Satan in Vue</title>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" defer href="/styles/global.css">
    <link rel="stylesheet" defer href="/styles/main.css">
    <link rel="stylesheet" defer href="/styles/theme.css">
    <link rel="stylesheet" defer href="/styles/layouts.css">
    <link rel="stylesheet" defer href="/styles/columns.css">
    <link rel="stylesheet" defer href="/styles/center_column.css">
    <link rel="stylesheet" defer href="/styles/modal.css">
    <link rel="stylesheet" defer href="/styles/card.css">
    <link rel="stylesheet" defer href="/styles/collapsible.css">
    <link rel="stylesheet" defer href="/styles/honeycomb.css">
    <link rel="stylesheet" defer href="/styles/animations.css">

    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
    <script>
      const socket = io()
    </script>

    <script src="https://unpkg.com/vue@3.2.4"></script>
    <script defer src="/js_vue/login.js"></script>
    <script defer src="/js_vue/join_lobby.js"></script>
    <script defer src="/js_vue/vue.js"></script>
    <script defer src="/js/theme.js"></script>
    <script defer src="/js/notification.js"></script>
  </head>
  <body>
    <div id="notification-center">
      <button id="notification-dismiss-all-button" style="display: none;">
        Dismiss All
      </button>
      <div id="notification-container"></div>
    </div>

    <main>
      <div class="title-container">
        <div class="title-container-top">
          <img src="/images/logo/logo.svg" alt="logo" id="home-title-logo">
          <h1 class="page-title"><span class="title-satan">Satan</span></h1>
        </div>
        <div class="title-container-links">
          <a href="/contributors" target="_blank">Contributors</a>
          <a href="/stats" target="_blank">Server Stats</a>
          <a href="https://scotscoop.com/wp-content/uploads/2020/06/IMG_2214-380x475.jpg" target="_blank">Building Costs</a>
          <a href="/settings" target="_blank">Settings</a>
          <span id="dark-theme-toggle"></span>
        </div>
      </div>
      <div id="vue">
        <p v-if="loginState.loggedIn">
          You are playing as {{ loginState.name }}
          <a @click="login(this, true)">(logout)</a>
        </p>


        <section v-if="!loginState.loggedIn">
          <h2>Choose a Name</h2>
          <div class="single-line-input">
            <input v-model="loginState.name" placeholder="Mustacho">
            <button @click="login(this, false)"><img src="/images/icons/check.svg" alt="Done" class="icon-1em"></button>
          </div>
        </section>
        <section v-if="loginState.loggedIn && !lobbyState.code">
          <div class="row-layout">
            <div class="column-layout">
              <h2>Create a Lobby</h2>
              <p>Choose a name for your lobby.</p>
              <div class="single-line-input">
                <input v-model="creatingLobbyName" placeholder="Epic Gamer Momebt">
                <button @click="createLobby(this, creatingLobbyName)">
                  <img src="/images/icons/plus.svg" alt="Create" class="icon-1em">
                </button>
              </div>
            </div>
            <div class="column-layout">
              <h2>Join a Lobby</h2>
              <p>Enter a lobby code.</p>
              <div class="single-line-input">
                <input v-model="joiningLobbyCode" placeholder="MURDER" style="text-transform: uppercase;">
                <button @click="joinLobby(this, joiningLobbyCode)">
                  <img src="/images/icons/plus.svg" alt="Join" class="icon-1em">
                </button>
              </div>
            </div>
          </div>
          <div class="row-layout">
            <div class="column-layout">
              <h2>Open Lobbies</h2>
              <button @click="refreshOpenLobbies(this)">
                <img src="/images/icons/refresh.svg" alt="Refresh" class="icon-1em">
                Refresh
              </button>

              <div class="flex-layout-grid">
                <div v-for="lobby in openLobbies" class="list-entry">
                  <div class="list-entry-title">
                    <h3>{{ lobby.name }}</h3>
                    <button @click="joinLobby(this, lobby.code)">Join</button>
                  </div>
                  <p>Code: <code>{{ lobby.code }}</code></p>
                  <p>Players: <code>{{ lobby.playerCount }}/{{ lobby.maxPlayerCount }}</code></p>
                </div>
              </div>

            </div>
          </div>
        </section>
        <section v-if="lobbyState.code">
            <div class="single-line-layout">
                <h2 id="lobby-name"></h2>
                <button @click="leaveLobby(this)"><img class="icon-1em" alt="←" src="/images/icons/leave.svg"> Leave Lobby</button>
            </div>
            <div class="flex-layout-grid">
                <div id="left-column">
                    <div id="game-controls" class="button-group">
                        <button class="game-control-button" id="settlement-button">
                            <img src="/images/game_controls/settlement.svg" alt="Settlement">
                        </button>
                        <button class="game-control-button" id="city-button">
                            <img src="/images/game_controls/city.svg" alt="Settlement">
                        </button>
                        <button class="game-control-button" id="road-button">
                            <img src="/images/game_controls/road.svg" alt="Settlement">
                        </button>
                        <button class="game-control-button" id="development-card-button">
                            <img src="/images/game_controls/development_card.svg" alt="Development Card">
                        </button>
                    </div>
                    <p id="inv-list">Settlements: 2, Roads: 2, Cities: 0</p>
                    
                    <div id="resource-cards"></div>
                    
                    <button class="collapsible collapsible-active">Trade Menu</button>
                    <div id="trade-panel">
                        <div id="trade-interface">
                            <p id="trade-offerer-name">offerer name</p>
                            <br>
                            <select id="trade-taker-select">
                                <option value="humans">Humans</option>
                                <option value="stockpile">Bank</option>
                                <option value="discard" style="display: none;">Discard</option>
                            </select>

                            <div id="trade-offerer-inputs" class="trade-column"></div>
                            <div class="trade-icon">
                                <img id="trade-img" src="/images/icons/trade.svg" alt="trade">
                                <img id="discard-img" src="/images/icons/discard.svg" alt="discard" style="display: none;">
                            </div>
                            <div id="trade-taker-inputs" class="trade-column"></div>
                        </div>
                        <button id="trade-button">controlled with js</button>
                        <p id="trade-takers">You can click the trade buttons in the playerlist to finalise a trade.</p>
                    </div>

                    <br>
                    <button class="collapsible">Development Cards</button>
                    <div id="development-card-list" style="display: none;">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-header">Quack!</h2>
                                <img src="/images/resource_cards/bricks.png" alt="card icon" class="card-icon">
                            </div>
                            <p>Instant win</p>
                        </div>
                    </div>
                </div>

                <div id="lobby-waiting" class="flex-layout-grid-grow-2">
                    <p>
                        Lobby Code:
                        <code>
                            <span id="lobby-code-display"></span>
                        </code>
                        <br>
                        <a id="lobby-link-display" href=""></a>
                    </p>
                    
                    <h3>Lobby Settings</h3>
                    <div class="lobby-settings-panel">
                        <button id="lobby-settings-start" disabled>Start Game</button>
                    </div>

                    <div id="colour-choose-container">
                        <h3 id="choose-colour">Choose a Colour</h3>
                        <div id="colour-buttons-container" class="honeycomb">
                            <div class="honeycomb-row">
                                <div class="hexanone"></div>
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                                <div class="hexanone"></div>
                            </div>
                            <div class="honeycomb-row">
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                            </div>
                            <div class="honeycomb-row">
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                                <div class="hexagon"><div class="hexagon-content">a</div></div>
                            </div>
                        </div>
                        <p>
                            if any of these colour names look wrong its not our fault its the
                            css standard's fault because we were too lazy to implement our own
                            colour naming system lol
                        </p>
                    </div>
                </div>
                <div id="lobby-playing" class="flex-layout-grid-grow-2" style="display: none;">
                    <!-- <button id="canvas-fullscreen">Fullscreen Game</button> -->
                    <div id="turn-data-display">
                        <div>
                            <h4 id="turn-player-header">Turn</h4>
                            <span id="turn-player">Mustacho</span>
                        </div>
                        <div>
                            <h4 id="turn-timer-header">Timer</h4>
                            <span id="turn-timer">sdgfjlg</span>
                        </div>
                    </div>
                    <p id="game-status-message"></p>
                    <canvas id="game-canvas">Oeuf</canvas>
                </div>
                <div id="right-column">
                    <div id="turn-controls" style="display: none;">
                        <button id="end-turn-dice-button">End Turn</button>
                    </div>

                    <div id="lobby-chat-container">
                        <h3>Chat</h3>
                        <div id="lobby-chat-messages"></div>
                        <div class="single-line-input">
                            <input id="lobby-chat-input" placeholder="Send a message">
                            <button id="lobby-chat-send-button">
                                <img src="/images/icons/check.svg" alt="Send" class="icon-1em">
                            </button>
                        </div>
                    </div>
                    <div id="lobby-player-list-container">
                        <h3>Players <span id="lobby-player-count">0</span>/<span id="lobby-max-player-count">0</span></h3>
                        <div id="lobby-player-list"></div>

                        <div class="modal" id="player-list-modal">
                            <div class="modal-content">
                                <span class="modal-close">&times;</span>
                                <h3 class="modal-title">PLAYERNAME</h3>
                                <div class="modal-buttons"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
      </div>
    </main>
  </body>
</html>